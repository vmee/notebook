# bash

## bash的基础特性

命令历史：shell进程会在其会话中保存此前用户提交执行的过的命令
```sh
$ history
```
定制history功能，可以通过环境变量实现
- HISTSIZE: shell进程可保留的命令的历史的条数
- HISTFILE：持久保存命令历史的文件 ~/.bash_history
- HISTFILESIZE：命令历史文件的大小

### History

> history [-c] [-d offset] [n] or history -anrw [filename] or history -ps arg [arg...]

- -c:清空历史记录
- -d offset: 删除指定命令历史
- -r: 从文件读取命令历史到历史列表中
- -w: 把历史列表中的命令追加至历史文件中
- history #: 显示最近的#条命令

调用命令历史列表中的命令
- !#： 再一次执行历史列表中的第#条命令
- !!: 再一次执行上一条命令
- !STRING： 再一次执行命令历史列表中最近一个以STRING开头的命令
  - 注意：命令的重复执行有时需要依赖于幂等性
  
调用上一条命令的最后一个参数：
- 快捷键：ECS+.
- 字符串：!$

控制命令历史记录的方式
环境变量：HISTCONTROL
- ignoredups: 忽略重复的命令
- ignorespace: 忽略以空白字符开头的命令
- ignoreboth: 以上两者同时生效

修改变量的值 
```sh
$ NAME="VALUE"
```

## 命令补全 
tab键
- 命令补全
- 路径补全

## 命令行展开
- ～ 自动展开为用户的家目录，或指定用户的家目录
- {} 可承载一个以逗号分隔的路径列表，并能够将其展开为多个路径
  - /tmp/{a,b} = /tmp/a, tmp/b

## 命令执行的状态结果
命令执行的状态结果
bash通过状态返回值来输出此结果
- 失败：0
- 成功：1-255
命令执行完成之后，其状态返回值保存于bash的特殊变理$?值里

命令正常执行时，有的还回有命令的返回值：根据命令及其功能的不同，结果各不相同

## 引用命令的执行结果
引用命令的执行结果：$(COMMAND) 或 `COMMAND`

## 引用 
- 强引用 ''
- 弱引用 ""
- 命令引用 ``

## 快捷键
- CTRL+a 跳转命令行首
- CTRL+e 跳转至命令行尾
- CTRL+u 删除行首至光标所在处之间的所有字符
- CTRL+k 删除行尾至光标所在处之间的所有字符
- CTRL+l 清屏 相当于clear


## 变量
变量是命名的内存空间

### 变量类型
- 整型
- 浮点型 
- 字符型
- 布尔型
- 日期时间型

- 字符型 
- 数值型
  - 精确数值
  - 近似数值


变量的类型确定了存储格式，数据范围，参与运算。

- int 8： 1000， 0000 1000
- int 16： 10000， 0001 0000 
- string 16: 16bit


## globbing 文件名通配
匹配模式之元字符
- * 匹配任意长度的任意字符
- ？匹配任意单个字符
- [] 匹配指定范围内容的任意单个字符 [a-z] [A-Z] [0-9] [a-z0-9] [abdyx]
  - [[:upper:]] 匹配大写字母
  - [[:lower:]] 匹配所有小写字母
  - [[:alpha:]] 所有字母
  - [[:digit:]] 所有数字
  - [[:alnum:]] 所有字母和数字
  - [[:space:]] 所有空白字符
  - [[:punct:]] 所有标点符号
- [^] 匹配指定范围外的任意字符 [^a-z]

## IO重定向及管道
程序：指令+数据
程序： IO

可用于输入的设备：文件 
键盘设备，文件系统的常规文件，网卡等
可用于输出的设备 ：文件
显示器，文件系统上的常规文件，网卡等

程序的数据流有三种
- 输入的数据流： <-- 标准输入（stdin），键盘
- 输出的数据流： --> 标准输出 （stdout） 显示器
- 错误输出流： --> 错误输出(stderr) 显示器
  